<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
		<title>Analysis Data</title>
		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="../bower_components/jquery/dist/jquery.min.js"></script>
		<script src="../bower_components/jquery-ui/jquery-ui.min.js"></script>
		<link rel="stylesheet" href="../bower_components/jquery-ui/themes/base/jquery-ui.min.css">
		<link rel="stylesheet" href="../bower_components/jquery-ui/themes/base/theme.css">
		<!-- Bootstrap -->
		<script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
		<link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="../css/stylesv2.css" rel="stylesheet">
		<link href="../css/stylesConsultas.css" rel="stylesheet">
		<link href="../css/stylesv2Consultas.css" rel="stylesheet">
		<!-- Script personalizado -->
		<!--script src="ClaseObserverGrafico.js"></script-->
		<!--script src="ClaseGrafico.js"></script-->
		<!--script src="controllerConsultas.js"></script-->
		<script src="GendomusLibrary.js"></script>

		<!--Load the AJAX API-->
		<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
		<script type="text/javascript">
			// Load the Visualization API and the corechart package.
			google.charts.load('current', {
				'packages' : ['corechart']
			});
			google.charts.setOnLoadCallback(function() {
				$(document).ready(function() {
					//var controller = new GenDomusConsultas();
					var controller = new GENDOMUS.APP.inicializar();
					controller.init({
						numeroContenedoresGraficosAllowed : 6,
						idContenedorActual : 0,
						prefijoContenedor : "gr",
						altoGrafico : 290,
						anchoGrafico : 290,
						idBtnAgregarGrafico : "",
						idBtnEliminarGrafico : "",
						idDashboard : '#dashboard ul',
						idPilaFiltros: "#filterList",
						idContendorMensajes : "#msgs"
						
					});

					//Boton para mostrar el panel de filtros
					$('#btnFilters').click(function() {
						if ($('.sidebar-offcanvas').css('background-color') == 'rgb(255, 255, 255)') {
							$('.filters').attr('tabindex', '-1');
						} else {
							$('.filters').attr('tabindex', '');
						}
						$('.row-offcanvas').toggleClass('active');

					});
					//Boton para abrir el menu de agregacion de Grafico
					$('#btnAddGraph').click(function() {
						$("#frameNewGraph").modal();
					});
					$('#btnDeleteGraph').click(function() {
						//TO DO
					});
					//Boton "Aceptar" del cuadro de dialogo para agregar un grafico
					$('#frameNewGraph .btn-success').click(function() {

						//Obtengo las variables del gr√°fico
						var titulo = $('#frameNewGraph #txtTitle').val();
						//console.log(titulo);
						var tipoGrafico = 0;
						//console.log(tipoGrafico);
						var variablePrincipal = $('#frameNewGraph select[id="lstMainVariable"]').val();
						//console.log(variablePrincipal);
						var variableSecundaria = $('#frameNewGraph select[id="lstSecondVariable"]').val();
						//console.log(variableSecundaria);
						var operacion = $('#frameNewGraph select[id="lstAgregation"]').val();
						//console.log(operacion);

						//Add the graph to cotainer created.
						var options = {
							'title' : titulo,
							'tipoGrafico' : tipoGrafico,
							'variablePrincipal' : variablePrincipal,
							'variableSecundaria' : variableSecundaria,
							'operacion' : operacion,
							'width' : 290,
							'height' : 290
						};
						controller.addGraph(options);

					});
					//Agregar funcionalidad SORTABLE a la lista ul
					$("#sortable1").sortable().disableSelection();
				});
			});

		</script>
	</head>
	<body>

		<div class="container-fluid">
			<div  id="barrasuperior" class="row">
				<div class="col-xs-12 col-md-8">
					<div id="logo"></div>
					<ul id="comandos">
						<li>
							<div id="btnFilters"></div>
						</li>
						<li>
							<div id="btnAddGraph"></div>
						</li>
					</ul>
				</div>
				<div class="col-xs-12 col-md-4">
					<div id="totales">
						<div>
							10 m
						</div>
						<div>
							30000000 variants
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="principal">
			<div class="row row-offcanvas row-offcanvas-left">

				<div class="col-xs-12 col-sm-9 content">
					<div id="dashboard">
						<ul id="sortable1"></ul>
					</div>
				</div>

				<div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
					<div class="sidebar-collapse menu-scroll">
						<ul id="filterList" class="nav">
							<li>
								<div class="fondoGradado filtro">
									<div class="item">
										Chromosome
									</div>
									<div class="item">
										2
									</div>
									<div class="item">
										<div class="btnRemove"></div>
									</div>
								</div>
							</li>
							<li>
								<div class="fondoGradado filtro">
									<div class="item">
										Chromosome
									</div>
									<div class="item">
										2
									</div>
									<div class="item">
										<div class="btnRemove"></div>
									</div>
								</div>
							</li>
						</ul>

					</div>
				</div>

			</div>
		</div>
		<!----- interfaz Nuevo Grafico --->
		<div role="dialog" id="frameNewGraph" class="modal fade">
			<div class="modal-dialog">
				<!--CONTENIDO DEL MODAL-->
				<div class="modal-content">
					<div class="modal-header" style="padding:5px 50px;">
						<button type="button" class="close" data-dismiss="modal">
							&times;
						</button>
						<h4><span class="glyphicon glyphicon-lock"></span> New Graph</h4>
					</div>
					<div class="modal-content" style="padding:40px 50px;">
						<div class="form-group">
							<label for="txtTitle">Title:</label>
							<input type="text" class="form-control" id="txtTitle">
							<div class="row top-buffer">
								<div class="col-md-4">
									<label for="lstMainVariable">Main:</label>
									<select class="form-control" id="lstMainVariable">
										<option value="chr">Chromosome</option>
										<option value="var">Variant</option>
										<option value="ref">Allele REF</option>
										<option value="alt">Allele ALT</option>
										<option value="filter">Filter</option>
										<option value="qlt">Quality</option>
										<option value="pos">Position</option>
										<option selected>Select...</option>
									</select>
								</div>
								<div class="col-md-4">
									<label for="lstMainVariable">Operation:</label>
									<select class="form-control" id="lstAgregation">
										<option>Count</option>
										<option>Sum</option>
										<option selected>Select...</option>
									</select>
								</div>
								<div class="col-md-4">
									<label for="lstMainVariable">Detail:</label>
									<select class="form-control" id="lstSecondVariable">
										<option>Chromosome</option>
										<option>Variant</option>
										<option>Allele REF</option>
										<option>Allele ALT</option>
										<option>Filter</option>
										<option>Quality</option>
										<option>Position</option>
										<option selected>Select...</option>
									</select>
								</div>
							</div>
							<h5>Select Graph Type:</h5>
							<div class="row">
								<div class="col-md-4">
									<div class="graph_snapshot"></div>
								</div>
								<div class="col-md-4">
									<div class="graph_snapshot"></div>
								</div>
								<div class="col-md-4">
									<div class="graph_snapshot"></div>
								</div>
							</div>
							<label class="checkbox-inline">
								<input type="checkbox" value="">
								Show legent</label>
							<div class="modal-footer">
								<button type="button" class="btn btn-default btn-success pull-right" data-dismiss="modal">
									<span class="glyphicon glyphicon-off"></span> Add
								</button>
								<button type="button" class="btn btn-default btn-danger pull-left" data-dismiss="modal">
									<span class="glyphicon glyphicon-off"></span> Cancel
								</button>
							</div>
						</div>
					</div>

				</div>
				<!--FIN CONTENIDO DEL MODAL-->
			</div>
		</div>
	</body>

</html>